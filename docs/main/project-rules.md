# プロジェクト進行ルール

## 1. 開発フロー

### 1.1 ブランチ戦略
- `main`: 本番環境用ブランチ
- `develop`: 開発用ブランチ
- `feature/*`: 機能開発用ブランチ
- `hotfix/*`: 緊急修正用ブランチ
- `release/*`: リリース用ブランチ

### 1.2 プルリクエストの流れ
1. 機能開発ブランチの作成
2. 開発作業の実施
3. テストの実行
4. プルリクエストの作成
5. コードレビュー
6. マージ

### 1.3 コミットメッセージのルール
```
<type>(<scope>): <subject>

<body>

<footer>
```

- type: feat, fix, docs, style, refactor, test, chore
- scope: 変更の影響範囲
- subject: 変更内容の要約
- body: 変更の詳細
- footer: 関連するIssue番号など

## 2. コーディング規約

### 2.1 型安全性
- 明示的な型定義を使用
- `any`および`unknown`の使用禁止
- 不必要な型定義の継承禁止
- 型定義による明確なデータ構造

### 2.2 命名規則
- ファイル名: kebab-case
- コンポーネント: PascalCase
- 関数/変数: camelCase
- 定数: UPPER_SNAKE_CASE
- インターフェース: PascalCase

### 2.3 コメント
- 複雑なロジックには必ずコメント
- JSDoc形式で関数の説明
- TODOコメントは期限を明記

## 3. レビュー基準

### 3.1 コードレビュー
- 機能要件の充足
- コードの可読性
- パフォーマンスへの影響
- セキュリティ面の考慮
- テストの網羅性

### 3.2 ドキュメントレビュー
- 仕様書との整合性
- 更新の必要性
- 分かりやすさ

## 4. テスト方針

### 4.1 テストの種類
- ユニットテスト
- 統合テスト
- E2Eテスト

### 4.2 テストカバレッジ
- バックエンド: 80%以上
- フロントエンド: 70%以上

## 5. デプロイメント

### 5.1 環境
- 開発環境
- ステージング環境
- 本番環境

### 5.2 デプロイフロー
1. 開発環境でのテスト
2. ステージング環境での検証
3. 本番環境へのデプロイ

## 6. セキュリティ

### 6.1 基本方針
- 最小権限の原則
- 入力値のバリデーション
- エラーメッセージの適切な管理

### 6.2 定期的な確認事項
- 依存パッケージの脆弱性確認
- セキュリティアップデートの適用
- ログの監視

## 7. 進捗管理ルール

### 7.1 タスク進捗の記録
- ファイル: `docs/sub/progress/task_progress.md`
- 記録内容:
  - タスクのステータス（🔄進行中、✅完了、⏳待機中、❌問題発生）
  - ブランチ名
  - 開始・完了日
  - 作業内容の要約
  - 次のタスクへの引き継ぎ事項
- 更新タイミング:
  - 新しいブランチ作成時
  - PR作成時
  - タスク完了時
  - 重要な進捗があった時

### 7.2 トラブルシューティング
- ファイル: `docs/sub/troubleshooting.md`
- 記録内容:
  - 発生タスク
  - 発生環境（OS/Node.jsバージョンなど）
  - 問題の詳細（エラーメッセージ、発生状況、再現手順）
  - 原因
  - 解決方法
  - 予防策
  - 参考リンク
- 更新タイミング:
  - 問題が発生した時
  - 解決策が見つかった時
  - 予防策が分かった時

### 7.3 開発フェーズの遵守
- ファイル: `docs/guide/development_phases.md`に基づいてタスクを進める
- 各フェーズの順序を守りながら開発を進める
- フェーズ間の依存関係を考慮する

### 7.4 進捗管理の自動化
- AIアシスタントが進捗を自動的に記録
- タスクの開始・完了時にステータスを更新
- 問題発生時にトラブルシューティングに記録
- 新しい会話セッション開始時にこのルールを参照
